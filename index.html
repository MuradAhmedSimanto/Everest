<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Everest</title>

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- Header -->
<div class="navbar">
  <h2 class="logo">Everest</h2>

  <div class="top-icons">
    <a href="https://tinyurl.com/Murad-Ai" target="_blank">
      <i class="fa-solid fa-bolt"></i>
    </a>
    <i class="fa-solid fa-magnifying-glass"></i>
    <i class="fa-solid fa-bell"></i>
    <i class="fa-solid fa-message"></i>
  </div>
</div>

<!-- Menu bar -->
<div class="menu-bar">
  <i class="fa-solid fa-house active"></i>
  <i class="fa-solid fa-video"></i>
  <i class="fa-solid fa-user-group"></i>

  <div class="menu-wrapper">
    <i class="fa-solid fa-bars" id="menuBtn"></i>

    <div class="dropdown-menu" id="dropdownMenu">
      <a href="#"><i class="fa-solid fa-user"></i> Profile</a>
      <a href="#"><i class="fa-solid fa-user-plus"></i> Signup</a>
      <a href="#"><i class="fa-solid fa-gear"></i> Settings</a>
      <a href="#" class="logout">
        <i class="fa-solid fa-right-from-bracket"></i> Logout
      </a>
    </div>
  </div>
</div>

<!-- Post Box -->
<div class="post-box">
  <div class="post-input">

    <!-- Profile pic (NO gallery) -->
    <img id="profilePic" src="https://i.imgur.com/6VBx3io.png">

    <!-- Whats on your mind (NO gallery) -->
    <div class="mind">
      What's on your mind?
    </div>

    <!-- Post button (ONLY this opens gallery) -->
    <button id="postBtn" type="button">Post</button>
  </div>
</div>

<!-- Hidden file input (used ONLY by Post button) -->
<input type="file" id="imageInput" accept="image/*,video/*" hidden>

<div id="feed"></div>

<script>
  /* Menu */
  const menuBtn = document.getElementById("menuBtn");
  const dropdownMenu = document.getElementById("dropdownMenu");

  menuBtn.onclick = () => {
    dropdownMenu.classList.toggle("show");
  };

  window.onclick = (e) => {
    if (!e.target.closest(".menu-wrapper")) {
      dropdownMenu.classList.remove("show");
    }
  };

  /* Post system */
  const postBtn = document.getElementById("postBtn");
  const imageInput = document.getElementById("imageInput");
  const feed = document.getElementById("feed");

  /* ONLY post button opens gallery */
  postBtn.addEventListener("click", () => {
    imageInput.click();
  });

  imageInput.addEventListener("change", () => {
    const file = imageInput.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
      const post = document.createElement("div");
      post.className = "post";

      let mediaHTML = "";
      if (file.type.startsWith("image")) {
        mediaHTML = `<img src="${reader.result}">`;
      } else {
        mediaHTML = `
          <video controls>
            <source src="${reader.result}">
          </video>
        `;
      }

      post.innerHTML = `
        ${mediaHTML}

        <div class="post-actions">
          <button onclick="like(this)">
            <i class="fa-regular fa-thumbs-up"></i> Like
          </button>

          <button onclick="toggleComment(this)">
            <i class="fa-regular fa-comment"></i> Comment
          </button>

          <button>
            <i class="fa-solid fa-share"></i> Share
          </button>
        </div>

        <div class="comment-box" style="display:none;">
          <input type="text" placeholder="Write a comment...">
        </div>
      `;

      feed.prepend(post);
      imageInput.value = "";
    };

    reader.readAsDataURL(file);
  });

  /* Like */
  function like(btn) {
    btn.innerHTML = '<i class="fa-solid fa-heart"></i> Liked';
  }

  /* Comment toggle */
  function toggleComment(btn) {
    const post = btn.closest(".post");
    const box = post.querySelector(".comment-box");
    box.style.display = box.style.display === "block" ? "none" : "block";
  }
</script>

</body>
</html>
